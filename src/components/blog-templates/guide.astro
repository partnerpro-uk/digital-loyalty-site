---
/**
 * Guide Template
 * For comprehensive guides and long-form content
 */

const { post } = Astro.props;
---

<article class="guide-layout">
  <header class="guide-header mb-12">
    {post.excerpt && (
      <p class="text-xl text-[var(--text-secondary)] leading-relaxed max-w-3xl mx-auto text-center">
        {post.excerpt}
      </p>
    )}
    
    <div class="flex flex-wrap justify-center items-center gap-4 mt-8 text-sm text-[var(--text-secondary)]">
      {post.author && (
        <div class="flex items-center gap-2">
          {post.author.image && (
            <img 
              src={post.author.image.asset.url + '?w=32&h=32&fit=crop'} 
              alt={post.author.name}
              class="w-8 h-8 rounded-full"
            />
          )}
          <span>{post.author.name}</span>
        </div>
      )}
      
      {post.publishedAt && (
        <time datetime={post.publishedAt}>
          {new Date(post.publishedAt).toLocaleDateString(post.language, { 
            year: 'numeric', 
            month: 'long', 
            day: 'numeric' 
          })}
        </time>
      )}
      
      {post.category && (
        <span class="px-3 py-1 rounded-full bg-[var(--bg-secondary)] border border-[var(--border-color)]">
          {post.category.name[post.language] || post.category.name.en}
        </span>
      )}
    </div>
  </header>
  
  <div class="guide-content prose prose-lg dark:prose-invert max-w-4xl mx-auto">
    <slot />
  </div>
  
  {(post.tags && post.tags.length > 0) || (post.relatedPosts && post.relatedPosts.length > 0) && (
    <div class="mt-16 space-y-8">
      {post.tags && post.tags.length > 0 && (
        <div class="pt-8 border-t border-[var(--border-color)]">
          <h3 class="text-lg font-semibold text-[var(--text-primary)] mb-4">Topics Covered</h3>
          <div class="flex flex-wrap gap-2">
            {post.tags.map(tag => (
              <a 
                href={`/${post.language === 'en' ? '' : post.language + '/'}blog/tag/${tag.slug.current}`}
                class="px-4 py-2 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-color)] hover:border-[#8b5cf6] hover:text-[#8b5cf6] transition-colors text-sm font-medium"
              >
                {tag.name[post.language] || tag.name.en}
              </a>
            ))}
          </div>
        </div>
      )}
      
      {post.relatedPosts && post.relatedPosts.length > 0 && (
        <div class="pt-8 border-t border-[var(--border-color)]">
          <h3 class="text-2xl font-bold text-[var(--text-primary)] mb-6">Continue Learning</h3>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            {post.relatedPosts.map(related => (
              <a 
                href={`/${post.language === 'en' ? '' : post.language + '/'}blog/${related.slug.current}`}
                class="group flex gap-4 p-4 rounded-xl bg-[var(--bg-secondary)] border border-[var(--border-color)] hover:border-[#8b5cf6] transition-all"
              >
                {related.featuredImage && (
                  <img 
                    src={related.featuredImage.asset.url + '?w=120&h=120&fit=crop'} 
                    alt={related.title}
                    class="w-24 h-24 rounded-lg object-cover flex-shrink-0"
                  />
                )}
                <div class="flex-1">
                  <h4 class="font-semibold text-[var(--text-primary)] group-hover:text-[#8b5cf6] transition-colors mb-2 line-clamp-2">
                    {related.title}
                  </h4>
                  {related.excerpt && (
                    <p class="text-sm text-[var(--text-secondary)] line-clamp-2">
                      {related.excerpt}
                    </p>
                  )}
                </div>
              </a>
            ))}
          </div>
        </div>
      )}
    </div>
  )}
</article>

<style>
  .guide-layout {
    padding: 3rem 1.5rem;
  }
  
  .guide-header h1 {
    font-size: 3rem;
    font-weight: 800;
    line-height: 1.1;
    margin-bottom: 1.5rem;
    text-align: center;
    color: var(--text-primary);
  }
  
  /* Table of contents style headings */
  .guide-content :global(h2) {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-primary);
    margin-top: 3rem;
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid var(--border-color);
  }
  
  .guide-content :global(h3) {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-top: 2rem;
    margin-bottom: 1rem;
  }
  
  .guide-content :global(h4) {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-top: 1.5rem;
    margin-bottom: 0.75rem;
  }
  
  /* Rich content formatting */
  .guide-content :global(p) {
    line-height: 1.8;
    margin-bottom: 1.25rem;
    color: var(--text-secondary);
  }
  
  .guide-content :global(ul),
  .guide-content :global(ol) {
    margin: 1.5rem 0;
    padding-left: 1.5rem;
  }
  
  .guide-content :global(li) {
    margin-bottom: 0.75rem;
    line-height: 1.7;
    color: var(--text-secondary);
  }
  
  .guide-content :global(li > ul),
  .guide-content :global(li > ol) {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
  }
  
  /* Callout boxes */
  .guide-content :global(blockquote) {
    background: linear-gradient(135deg, #8b5cf6/10 0%, #a78bfa/10 100%);
    border-left: 4px solid #8b5cf6;
    padding: 1.5rem;
    border-radius: 0 12px 12px 0;
    margin: 2rem 0;
    font-size: 1.05rem;
  }
  
  .guide-content :global(blockquote p) {
    margin: 0;
  }
  
  /* Info boxes for tips/notes */
  .guide-content :global(.tip),
  .guide-content :global(.note),
  .guide-content :global(.warning) {
    padding: 1rem 1.5rem;
    border-radius: 8px;
    margin: 1.5rem 0;
  }
  
  .guide-content :global(.tip) {
    background: #10b981/10;
    border-left: 4px solid #10b981;
  }
  
  .guide-content :global(.note) {
    background: #3b82f6/10;
    border-left: 4px solid #3b82f6;
  }
  
  .guide-content :global(.warning) {
    background: #f59e0b/10;
    border-left: 4px solid #f59e0b;
  }
  
  /* Code blocks */
  .guide-content :global(pre) {
    background: var(--bg-secondary) !important;
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 1.5rem;
    overflow-x: auto;
    margin: 2rem 0;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
  }
  
  .guide-content :global(code) {
    background: var(--bg-secondary);
    border: 1px solid var(--border-color);
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-size: 0.9em;
    font-family: 'Monaco', 'Courier New', monospace;
  }
  
  .guide-content :global(pre code) {
    background: transparent;
    border: none;
    padding: 0;
  }
  
  /* Tables */
  .guide-content :global(table) {
    width: 100%;
    border-collapse: collapse;
    margin: 2rem 0;
    border-radius: 8px;
    overflow: hidden;
  }
  
  .guide-content :global(thead) {
    background: var(--bg-secondary);
  }
  
  .guide-content :global(th) {
    padding: 0.75rem 1rem;
    text-align: left;
    font-weight: 600;
    color: var(--text-primary);
    border-bottom: 2px solid var(--border-color);
  }
  
  .guide-content :global(td) {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--border-color);
  }
  
  .guide-content :global(tbody tr:last-child td) {
    border-bottom: none;
  }
  
  /* Images */
  .guide-content :global(img) {
    border-radius: 12px;
    margin: 2rem auto;
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    max-width: 100%;
    height: auto;
  }
  
  @media (max-width: 768px) {
    .guide-header h1 {
      font-size: 2rem;
    }
    
    .guide-content :global(h2) {
      font-size: 1.5rem;
    }
    
    .guide-content :global(h3) {
      font-size: 1.25rem;
    }
  }
</style>


